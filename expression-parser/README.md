## Лабораторная работа №2. Ручное построение нисходящих синтаксических анализаторов

#### Вариант 1. Арифметические выражения

### 1 Разработка грамматики

Построим грамматику:

- $S \rightarrow \varepsilon$
- $S \rightarrow E$
- $E \rightarrow E + T$
- $E \rightarrow E - T$
- $E \rightarrow T$
- $T \rightarrow T * F$
- $T \rightarrow F$
- $F \rightarrow n$
- $F \rightarrow fun(EA)$
- $F \rightarrow (E)$
- $F \rightarrow -F$
- $A \rightarrow \varepsilon$
- $A \rightarrow ,E$

| Нетерминал | Описание                       |
|------------|--------------------------------|
| S          | Стартовый нетерминал           |
| E          | Арифметическое выражение       |
| T          | Слагаемое                      |
| F          | Множитель                      |
| A          | Продолжение аргументов функции |

В грамматике есть левая рекурсия. Устраним ее:

- $S \rightarrow \varepsilon$
- $S \rightarrow E$
- $E \rightarrow TE'$
- $E' \rightarrow +TE'$
- $E' \rightarrow -TE'$
- $T \rightarrow FT'$
- $T' \rightarrow *FT'$
- $T' \rightarrow \varepsilon$
- $F \rightarrow n$
- $F \rightarrow fun(EA)$
- $F \rightarrow (E)$
- $F \rightarrow -F$
- $A \rightarrow \varepsilon$
- $A \rightarrow ,E$

| Нетерминал | Описание                              |
|------------|---------------------------------------|
| S          | Стартовый нетерминал                  |
| E          | Арифметическое выражение              |
| E'         | Продолжение арифметического выражения |
| T          | Слагаемое                             |
| T'         | Продолжение слагаемого                |
| F          | Множитель                             |
| A          | Прододжение аргументов функции        |

### 2 Построение лексического анализатора

Рализация лексического анализатора [LexicalAnalyzer.java](./src/LexicalAnalyzer.java).

Реализация токенов лексического анализатора [Token.java](./src/Token.java).

Сопоставим токены терминалам:

| Терминал | Токен    |
|----------|----------|
| (        | OBRACKET |
| )        | CBRACKET |
| $        | END      |
| n        | NUMBER   |
| fun      | FUNCTION |
| -        | MINUS    |
| +        | PLUS     |
| *        | MULTIPLY |
| ,        | COMMA    |

### 3 Построение синтаксического анализатора

Построим множества FIRST и FOLLOW для нетерминалов нашей грамматики:

| Нетерминал | FIRST                       | FOLLOW        |
|------------|-----------------------------|---------------|
| S          | $\varepsilon$, -, n, fun, ( | $             |
| E          | -, n, fun, (                | $, )          |
| E'         | $\varepsilon$, +, -         | $, )          |
| T          | -, n, fun, (                | $, ), +, -    |
| T'         | $\varepsilon$, *            | $, ), +, -    |
| F          | -, n, fun, (                | $, ), +, -, * |  
| A          | $\varepsilon$, ','          | $, )          |

Реализация структуры данных для храниния дерева [Tree.java](./src/Tree.java).

Реализация синтаксического анализатора [Parser.java](./src/Parser.java).

### 4 Визуализация дерева разбора

Реализована визуализация дерева разбора. Запустить парсер можно с помощью ```make``` из корня проекта. Парсер принимает
на вход выражение из стандартного ввода.

```
~$ make run
```

Изображение сохранится как ```derivation_tree.svg``` в корне проекта.

### 5 Подготовка набора тестов

| Тест                  | Описание                                                                          |
|-----------------------|-----------------------------------------------------------------------------------|
| (1+2)*sin(-3*(7-4)+2) | Пример из описания к заданию. Вычисляем значение по дереву и сверяем с настоящим. |
| "     \n   \t   "     | Строка из пробелов, переноса строки и табуляции.                                  |
| (((((1)))))           | Тест на вложенные скобки.                                                         |
| -----5                | Тест унарные минусы.                                                              |
| 1+2*-sin(-3)          | Тест на приоритет операций.                                                       |
| sin(sin(sin(1)))      | Тест на унарные операции.                                                         |

